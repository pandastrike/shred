var require=function(file,cwd){var resolved=require.resolve(file,cwd||"/"),mod=require.modules[resolved];if(!mod)throw new Error("Failed to resolve module "+file+", tried "+resolved);var res=mod._cached?mod._cached:mod();return res};require.paths=[],require.modules={},require.extensions=[".js",".coffee"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(x,cwd){function loadAsFileSync(x){if(require.modules[x])return x;for(var i=0;i<require.extensions.length;i++){var ext=require.extensions[i];if(require.modules[x+ext])return x+ext}}function loadAsDirectorySync(x){x=x.replace(/\/+$/,"");var pkgfile=x+"/package.json";if(require.modules[pkgfile]){var pkg=require.modules[pkgfile](),b=pkg.browserify;if(typeof b=="object"&&b.main){var m=loadAsFileSync(path.resolve(x,b.main));if(m)return m}else if(typeof b=="string"){var m=loadAsFileSync(path.resolve(x,b));if(m)return m}else if(pkg.main){var m=loadAsFileSync(path.resolve(x,pkg.main));if(m)return m}}return loadAsFileSync(x+"/index")}function loadNodeModulesSync(x,start){var dirs=nodeModulesPathsSync(start);for(var i=0;i<dirs.length;i++){var dir=dirs[i],m=loadAsFileSync(dir+"/"+x);if(m)return m;var n=loadAsDirectorySync(dir+"/"+x);if(n)return n}var m=loadAsFileSync(x);if(m)return m}function nodeModulesPathsSync(start){var parts;start==="/"?parts=[""]:parts=path.normalize(start).split("/");var dirs=[];for(var i=parts.length-1;i>=0;i--){if(parts[i]==="node_modules")continue;var dir=parts.slice(0,i+1).join("/")+"/node_modules";dirs.push(dir)}return dirs}cwd||(cwd="/");if(require._core[x])return x;var path=require.modules.path(),y=cwd||".";if(x.match(/^(?:\.\.?\/|\/)/)){var m=loadAsFileSync(path.resolve(y,x))||loadAsDirectorySync(path.resolve(y,x));if(m)return m}var n=loadNodeModulesSync(x,y);if(n)return n;throw new Error("Cannot find module '"+x+"'")}}(),require.alias=function(from,to){var path=require.modules.path(),res=null;try{res=require.resolve(from+"/package.json","/")}catch(err){res=require.resolve(from,"/")}var basedir=path.dirname(res),keys=(Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res})(require.modules);for(var i=0;i<keys.length;i++){var key=keys[i];if(key.slice(0,basedir.length+1)===basedir+"/"){var f=key.slice(basedir.length);require.modules[to+f]=require.modules[basedir+f]}else key===basedir&&(require.modules[to]=require.modules[basedir])}},require.define=function(filename,fn){var dirname=require._core[filename]?"":require.modules.path().dirname(filename),require_=function(file){return require(file,dirname)};require_.resolve=function(name){return require.resolve(name,dirname)},require_.modules=require.modules,require_.define=require.define;var module_={exports:{}};require.modules[filename]=function(){return require.modules[filename]._cached=module_.exports,fn.call(module_.exports,require_,module_,module_.exports,dirname,filename),require.modules[filename]._cached=module_.exports,module_.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var queue=[],canPost=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return canPost&&window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="browserify-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},!0),function(fn){canPost?(queue.push(fn),window.postMessage("browserify-tick","*")):setTimeout(fn,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(name){if(name==="evals")return require("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),require.define("path",function(require,module,exports,__dirname,__filename){function filter(xs,fn){var res=[];for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)&&res.push(xs[i]);return res}function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length;i>=0;i--){var last=parts[i];last=="."?parts.splice(i,1):last===".."?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){var resolvedPath="",resolvedAbsolute=!1;for(var i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!="string"||!path)continue;resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=path.charAt(0)==="/"}return resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},exports.normalize=function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/"),!path&&!isAbsolute&&(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){return p&&typeof p=="string"}).join("/"))},exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"",isWindows=!1;return dir?dir.length===1||isWindows&&dir.length<=3&&dir.charAt(1)===":"?dir:dir.substring(0,dir.length-1):"."},exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){return splitPathRe.exec(path)[3]||""}}),require.define("/shred.js",function(require,module,exports,__dirname,__filename){var _=require("underscore"),Ax=require("ax"),CookieJarLib=require("cookiejar"),CookieJar=CookieJarLib.CookieJar,Shred=function(options){options=options||{},this.agent=options.agent,this.defaults=options.defaults||{},this.log=options.logger||new Ax({level:"info"}),this._sharedCookieJar=new CookieJar,this.logCurl=options.logCurl||!1};Shred.Request=require("./shred/request"),Shred.Response=require("./shred/response"),Shred.prototype={request:function(options){return options.logger=this.log,options.logCurl=options.logCurl||this.logCurl,options.cookieJar="cookieJar"in options?options.cookieJar:this._sharedCookieJar,options.agent=options.agent||this.agent,new Shred.Request(_.defaults(options,this.defaults))}},"get put post delete".split(" ").forEach(function(method){Shred.prototype[method]=function(options){return options.method=method,this.request(options)}}),module.exports=Shred}),require.define("/node_modules/underscore/package.json",function(require,module,exports,__dirname,__filename){module.exports={main:"underscore.js"}}),require.define("/node_modules/underscore/underscore.js",function(require,module,exports,__dirname,__filename){(function(){function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var length=stack.length;while(length--)if(stack[length]==a)return!0;stack.push(a);var size=0,result=!0;if(className=="[object Array]"){size=a.length,result=size==b.length;if(result)while(size--)if(!(result=size in a==size in b&&eq(a[size],b[size],stack)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var key in a)if(hasOwnProperty.call(a,key)){size++;if(!(result=hasOwnProperty.call(b,key)&&eq(a[key],b[key],stack)))break}if(result){for(key in b)if(hasOwnProperty.call(b,key)&&!(size--))break;result=!size}}return stack.pop(),result}var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return new wrapper(obj)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.3.0";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.map=function(obj,iterator,context){var results=[];return obj==null?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),obj.length===+obj.length&&(results.length=obj.length),results)},_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;obj==null&&(obj=[]);if(nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;obj==null&&(obj=[]);if(nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var reversed=_.toArray(obj).reverse();return context&&!initial&&(iterator=_.bind(iterator,context)),initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){if(iterator.call(context,value,index,list))return result=value,!0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return obj==null?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&(results[results.length]=value)}),results)},_.reject=function(obj,iterator,context){var results=[];return obj==null?results:(each(obj,function(value,index,list){iterator.call(context,value,index,list)||(results[results.length]=value)}),results)},_.every=_.all=function(obj,iterator,context){var result=!0;return obj==null?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker}),result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return obj==null?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker}),!!result)};_.include=_.contains=function(obj,target){var found=!1;return obj==null?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?obj.indexOf(target)!=-1:(found=any(obj,function(value){return value===target}),found)},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var shuffled=[],rand;return each(obj,function(value,index,list){index==0?shuffled[0]=value:(rand=Math.floor(Math.random()*(index+1)),shuffled[index]=shuffled[rand],shuffled[rand]=value)}),shuffled},_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}),"value")},_.groupBy=function(obj,val){var result={},iterator=_.isFunction(val)?val:function(obj){return obj[val]};return each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)}),result},_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low},_.toArray=function(iterable){return iterable?iterable.toArray?iterable.toArray():_.isArray(iterable)?slice.call(iterable):_.isArguments(iterable)?slice.call(iterable):_.values(iterable):[]},_.size=function(obj){return _.toArray(obj).length},_.first=_.head=function(array,n,guard){return n!=null&&!guard?slice.call(array,0,n):array[0]},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))},_.last=function(array,n,guard){return n!=null&&!guard?slice.call(array,Math.max(array.length-n,0)):array[array.length-1]},_.rest=_.tail=function(array,index,guard){return slice.call(array,index==null||guard?1:index)},_.compact=function(array){return _.filter(array,function(value){return!!value})},_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){return _.isArray(value)?memo.concat(shallow?value:_.flatten(value)):(memo[memo.length]=value,memo)},[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array,result=[];return _.reduce(initial,function(memo,el,i){if(0==i||(isSorted===!0?_.last(memo)!=el:!_.include(memo,el)))memo[memo.length]=el,result[result.length]=array[i];return memo},[]),result},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=_.flatten(slice.call(arguments,1));return _.filter(array,function(value){return!_.include(rest,value)})},_.zip=function(){var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results},_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(i in array&&array[i]===item)return i;return-1},_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(i in array&&array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(len);while(idx<len)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(this instanceof bound){ctor.prototype=func.prototype;var self=new ctor,result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return func.apply(context,args.concat(slice.call(arguments)))}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);return funcs.length==0&&(funcs=_.functions(obj)),each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,throttling,more,whenDone=_.debounce(function(){more=throttling=!1},wait);return function(){context=this,args=arguments;var later=function(){timeout=null,more&&func.apply(context,args),whenDone()};timeout||(timeout=setTimeout(later,wait)),throttling?more=!0:func.apply(context,args),whenDone(),throttling=!0}},_.debounce=function(func,wait){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,func.apply(context,args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}},_.once=function(func){var ran=!1,memo;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments))}},_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return times<=0?func():function(){if(--times<1)return func.apply(this,arguments)}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)hasOwnProperty.call(obj,key)&&(keys[keys.length]=key);return keys},_.values=function(obj){return _.map(obj,_.identity)},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)source[prop]!==void 0&&(obj[prop]=source[prop])}),obj},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]==null&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isEqual=function(a,b){return eq(a,b,[])},_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(hasOwnProperty.call(obj,key))return!1;return!0},_.isElement=function(obj){return!!obj&&obj.nodeType==1},_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"},_.isObject=function(obj){return obj===Object(obj)},_.isArguments=function(obj){return toString.call(obj)=="[object Arguments]"},_.isArguments(arguments)||(_.isArguments=function(obj){return!!obj&&!!hasOwnProperty.call(obj,"callee")}),_.isFunction=function(obj){return toString.call(obj)=="[object Function]"},_.isString=function(obj){return toString.call(obj)=="[object String]"},_.isNumber=function(obj){return toString.call(obj)=="[object Number]"},_.isNaN=function(obj){return obj!==obj},_.isBoolean=function(obj){return obj===!0||obj===!1||toString.call(obj)=="[object Boolean]"},_.isDate=function(obj){return toString.call(obj)=="[object Date]"},_.isRegExp=function(obj){return toString.call(obj)=="[object RegExp]"},_.isNull=function(obj){return obj===null},_.isUndefined=function(obj){return obj===void 0},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i)},_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/;_.template=function(str,data){var c=_.templateSettings,tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||noMatch,function(match,code){return"',_.escape("+code.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate||noMatch,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||noMatch,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ").replace(/\\\\/g,"\\")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",func=new Function("obj","_",tmpl);return data?func(data,_):function(data){return func.call(this,data,_)}},_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj},addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);return unshift.call(args,this._wrapped),result(func.apply(_,args),this._chain)}};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;return(name=="shift"||name=="splice")&&length===0&&delete wrapped[0],result(wrapped,this._chain)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}}),wrapper.prototype.chain=function(){return this._chain=!0,this},wrapper.prototype.value=function(){return this._wrapped}}).call(this)}),require.define("/node_modules/ax/package.json",function(require,module,exports,__dirname,__filename){module.exports={main:"./lib/ax.js"}}),require.define("/node_modules/ax/lib/ax.js",function(require,module,exports,__dirname,__filename){var inspect=require("util").inspect,fs=require("fs"),_=require("underscore"),format=function(level,message){var debug=level=="debug"||level=="error";return message?typeof message=="object"?message instanceof Error&&debug?message.stack:inspect(message):message.toString():message.toString()},noOp=function(message){return this},makeLogger=function(level,fn){return function(message){return this.stream.write(this.format(level,message)+"\n"),this}},Logger=function(options){var logger=this,options=options||{};logger.options=_.defaults(options,{level:"info",timestamp:!0,prefix:""}),logger.options.module&&(logger.options.prefix=logger.options.module),logger.options.file?logger.stream=fs.createWriteStream(logger.options.file,{flags:"a"}):process.title==="node"?logger.stream=process.stderr:process.title==="browser"&&(logger.stream=function(){return console[logger.options.level].apply(console,arguments)});switch(logger.options.level){case"debug":_.each(["debug","info","warn"],function(level){logger[level]=Logger.writer(level)});case"info":_.each(["info","warn"],function(level){logger[level]=Logger.writer(level)});case"warn":logger.warn=Logger.writer("warn")}};Logger.writer=function(level){return function(message){var logger=this;process.title==="node"?logger.stream.write(logger.format(level,message)+"\n"):process.title==="browser"&&logger.stream(logger.format(level,message)+"\n")}},Logger.prototype={info:function(){},debug:function(){},warn:function(){},error:Logger.writer("error"),format:function(level,message){if(!message)return"";var logger=this,prefix=logger.options.prefix,timestamp=logger.options.timestamp?" "+(new Date).toISOString():"";return prefix+timestamp+": "+message}},module.exports=Logger}),require.define("util",function(require,module,exports,__dirname,__filename){}),require.define("fs",function(require,module,exports,__dirname,__filename){}),require.define("/node_modules/cookiejar/package.json",function(require,module,exports,__dirname,__filename){module.exports={main:"cookiejar.js"}}),require.define("/node_modules/cookiejar/cookiejar.js",function(require,module,exports,__dirname,__filename){exports.CookieAccessInfo=CookieAccessInfo=function e(domain,path,secure,script){return this instanceof CookieAccessInfo?(this.domain=domain||undefined,this.path=path||"/",this.secure=!!secure,this.script=!!script,this):new CookieAccessInfo(domain,path,secure,script)},exports.Cookie=Cookie=function t(cookiestr){return cookiestr instanceof Cookie?cookiestr:this instanceof Cookie?(this.name=null,this.value=null,this.expiration_date=Infinity,this.path="/",this.domain=null,this.secure=!1,this.noscript=!1,cookiestr&&this.parse(cookiestr),this):new Cookie(cookiestr)},Cookie.prototype.toString=function n(){var str=[this.name+"="+this.value];return this.expiration_date!==Infinity&&str.push("expires="+(new Date(this.expiration_date)).toGMTString()),this.domain&&str.push("domain="+this.domain),this.path&&str.push("path="+this.path),this.secure&&str.push("secure"),this.noscript&&str.push("httponly"),str.join("; ")},Cookie.prototype.toValueString=function(){return this.name+"="+this.value};var cookie_str_splitter=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;Cookie.prototype.parse=function(str){if(this instanceof Cookie){var parts=str.split(";"),pair=parts[0].match(/([^=]+)=((?:.|\n)*)/),key=pair[1],value=pair[2];this.name=key,this.value=value;for(var i=1;i<parts.length;i++){pair=parts[i].match(/([^=]+)(?:=((?:.|\n)*))?/),key=pair[1].trim().toLowerCase(),value=pair[2];switch(key){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=value?Number(Date.parse(value)):Infinity;break;case"path":this.path=value?value.trim():"";break;case"domain":this.domain=value?value.trim():"";break;case"secure":this.secure=!0}}return this}return(new Cookie).parse(str)},Cookie.prototype.matches=function(access_info){return this.noscript&&access_info.script||this.secure&&!access_info.secure||!this.collidesWith(access_info)?!1:!0},Cookie.prototype.collidesWith=function(access_info){if(this.path&&!access_info.path||this.domain&&!access_info.domain)return!1;if(this.path&&access_info.path.indexOf(this.path)!==0)return!1;if(this.domain===access_info.domain)return!0;if(this.domain&&this.domain.charAt(0)==="."){var wildcard=access_info.domain.indexOf(this.domain.slice(1));if(wildcard===-1||wildcard!==access_info.domain.length-this.domain.length+1)return!1}else if(this.domain)return!1;return!0},exports.CookieJar=CookieJar=function r(){if(this instanceof CookieJar){var cookies={};return this.setCookie=function(cookie){cookie=Cookie(cookie);var remove=cookie.expiration_date<=Date.now();if(cookie.name in cookies){var cookies_list=cookies[cookie.name];for(var i=0;i<cookies_list.length;i++){var collidable_cookie=cookies_list[i];if(collidable_cookie.collidesWith(cookie))return remove?(cookies_list.splice(i,1),cookies_list.length===0&&delete cookies[cookie.name],!1):cookies_list[i]=cookie}return remove?!1:(cookies_list.push(cookie),cookie)}return remove?!1:cookies[cookie.name]=[cookie]},this.getCookie=function(cookie_name,access_info){var cookies_list=cookies[cookie_name];for(var i=0;i<cookies_list.length;i++){var cookie=cookies_list[i];if(cookie.expiration_date<=Date.now()){cookies_list.length===0&&delete cookies[cookie.name];continue}if(cookie.matches(access_info))return cookie}},this.getCookies=function(access_info){var matches=[];for(var cookie_name in cookies){var cookie=this.getCookie(cookie_name,access_info);cookie&&matches.push(cookie)}return matches.toString=function e(){return matches.join(":")},matches.toValueString=function(){return matches.map(function(c){return c.toValueString()}).join(";")},matches},this}return new CookieJar},CookieJar.prototype.setCookies=function(cookies){cookies=Array.isArray(cookies)?cookies:cookies.split(cookie_str_splitter);var successful=[];for(var i=0;i<cookies.length;i++){var cookie=Cookie(cookies[i]);this.setCookie(cookie)&&successful.push(cookie)}return successful}}),require.define("/shred/request.js",function(require,module,exports,__dirname,__filename){var HTTP=require("http"),HTTPS=require("https"),parseUri=require("./parseUri"),Emitter=require("events").EventEmitter,sprintf=require("sprintf").sprintf,_=require("underscore"),Response=require("./response"),HeaderMixins=require("./mixins/headers"),Content=require("./content"),STATUS_CODES=HTTP.STATUS_CODES,Request=function(options){this.log=options.logger,this.cookieJar=options.cookieJar,this.encoding=options.encoding,this.logCurl=options.logCurl,processOptions(this,options||{}),createRequest(this)};Object.defineProperties(Request.prototype,{url:{get:function(){return this.scheme?sprintf("%s://%s:%s%s",this.scheme,this.host,this.port,(this.proxy?"/":this.path)+(this.query?"?"+this.query:"")):null},set:function(_url){return _url=parseUri(_url),this.scheme=_url.protocol,this.host=_url.host,this.port=_url.port,this.path=_url.path,this.query=_url.query,this},enumerable:!0},headers:{get:function(){return this.getHeaders()},enumerable:!0},port:{get:function(){if(!this._port)switch(this.scheme){case"https":return this._port=443;case"http":default:return this._port=80}return this._port},set:function(value){return this._port=value,this},enumerable:!0},method:{get:function(){return this._method=this._method||"GET"},set:function(value){return this._method=value,this},enumerable:!0},query:{get:function(){return this._query},set:function(value){var stringify=function(hash){var query="";for(var key in hash)query+=encodeURIComponent(key)+"="+encodeURIComponent(hash[key])+"&";return query=query.slice(0,-1),query};return value?(typeof value=="object"&&(value=stringify(value)),this._query=value):this._query="",this},enumerable:!0},parameters:{get:function(){return QueryString.parse(this._query||"")},enumerable:!0},body:{get:function(){return this._body},set:function(value){return this._body=new Content({data:value,type:this.getHeader("Content-Type")}),this.setHeader("Content-Type",this.content.type),this.setHeader("Content-Length",this.content.length),this},enumerable:!0},timeout:{get:function(){return this._timeout},set:function(timeout){var request=this,milliseconds=0;return timeout?(typeof timeout=="number"?milliseconds=timeout:milliseconds=(timeout.milliseconds||0)+1e3*((timeout.seconds||0)+60*((timeout.minutes||0)+60*(timeout.hours||0))),this._timeout=milliseconds,this):this},enumerable:!0}}),Object.defineProperty(Request.prototype,"content",Object.getOwnPropertyDescriptor(Request.prototype,"body")),_.extend(Request.prototype,{inspect:function(){var request=this,headers=_(request.headers).reduce(function(array,value,key){return array.push("	"+key+": "+value),array},[]).join("\n"),summary=["<Shred Request> ",request.method.toUpperCase(),request.url].join(" ");return[summary,"- Headers:",headers].join("\n")}}),_.extend(Request.prototype,{on:function(eventOrHash,listener){var emitter=this.emitter;return arguments.length===1&&typeof eventOrHash=="function"?emitter.on("response",eventOrHash):arguments.length===1&&typeof eventOrHash=="object"?_(eventOrHash).each(function(value,key){emitter.on(key,value)}):emitter.on(eventOrHash,listener),this}}),HeaderMixins.gettersAndSetters(Request);var processOptions=function(request,options){request.log.debug("Processing request options .."),request.emitter=new Emitter,request.agent=options.agent,options.on&&_(options.on).each(function(value,key){request.emitter.on(key,value)});if(!options.url&&!options.host){request.emitter.emit("request_error",new Error("No url or url options (host, port, etc.)"));return}options.url&&(options.proxy?(request.url=options.proxy,request.path=options.url):request.url=options.url),request.query=options.query||options.parameters||request.query,request.method=options.method,request.setHeader("user-agent",options.agent||"Shred"),request.setHeaders(options.headers);if(request.cookieJar){var cookies=request.cookieJar.getCookies(CookieAccessInfo(request.host,request.path));if(cookies.length){var cookieString=request.getHeader("cookie")||"";for(var cookieIndex=0;cookieIndex<cookies.length;++cookieIndex)cookieString.length&&cookieString[cookieString.length-1]!=";"&&(cookieString+=";"),cookieString+=cookies[cookieIndex].name+"="+cookies[cookieIndex].value+";";request.setHeader("cookie",cookieString)}}if(options.body||options.content)request.content=options.body||options.content;request.timeout=options.timeout},createRequest=function(request){var timeout;request.log.debug("Creating request .."),request.log.debug(request);var reqParams={host:request.host,port:request.port,method:request.method,path:request.path+(request.query?"?"+request.query:""),headers:request.getHeaders(),scheme:request.scheme,agent:request.agent};request.logCurl&&logCurl(request);var http=request.scheme=="http"?HTTP:HTTPS;request._raw=http.request(reqParams,function(response){request.log.debug("Received response .."),clearTimeout(timeout),response=new Response(response,request,function(response){var emit=function(event){var emitter=request.emitter,textStatus=STATUS_CODES[response.status]?STATUS_CODES[response.status].toLowerCase():null;emitter.listeners(response.status).length>0||emitter.listeners(textStatus).length>0?(emitter.emit(response.status,response),emitter.emit(textStatus,response)):emitter.listeners(event).length>0?emitter.emit(event,response):response.isRedirect||(emitter.emit("response",response),console.warn("Request has no event listener for status code "+response.status))};response.isRedirect?(request.log.debug("Redirecting to "+response.getHeader("Location")),request.url=response.getHeader("Location"),emit("redirect"),createRequest(request)):response.isError?emit("error"):emit("success")})}),request._raw.on("error",function(error){request.emitter.emit("request_error",error)}),request._raw.on("socket",function(socket){request.emitter.emit("socket",socket)}),request._raw.on("socket",function(){request._raw.socket.on("timeout",function(){request._raw.abort()})}),request.content&&(request.log.debug("Streaming body: '"+request.content.body.slice(0,59)+"' ... "),request._raw.write(request.content.body)),request.timeout&&(timeout=setTimeout(function(){request.log.debug("Timeout fired, aborting request ..."),request._raw.abort(),request.emitter.emit("timeout",request)},request.timeout)),request.log.debug("Sending request ..."),request._raw.end()},logCurl=function(req){var headers=req.getHeaders(),headerString="";for(var key in headers)headerString+='-H "'+key+": "+headers[key]+'" ';var bodyString="";req.content&&(bodyString+="-d '"+req.content.body+" ");var query=req.query?"?"+req.query:"";console.log("curl -X "+req.method.toUpperCase()+" "+req.scheme+"://"+req.host+":"+req.port+req.path+query+" "+headerString+bodyString)};module.exports=Request}),require.define("http",function(require,module,exports,__dirname,__filename){}),require.define("https",function(require,module,exports,__dirname,__filename){}),require.define("/shred/parseUri.js",function(require,module,exports,__dirname,__filename){function parseUri(str){var o=parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri}parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},module.exports=parseUri}),require.define("events",function(require,module,exports,__dirname,__filename){process.EventEmitter||(process.EventEmitter=function(){});var EventEmitter=exports.EventEmitter=process.EventEmitter,isArray=typeof Array.isArray=="function"?Array.isArray:function(xs){return Object.toString.call(xs)==="[object Array]"},defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){this._events||(this._events={}),this._events.maxListeners=n},EventEmitter.prototype.emit=function(type){if(type==="error")if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var handler=this._events[type];if(!handler)return!1;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return!0}if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1),listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++)listeners[i].apply(this,args);return!0}return!1},EventEmitter.prototype.addListener=function(type,listener){if("function"!=typeof listener)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",type,listener);if(!this._events[type])this._events[type]=listener;else if(isArray(this._events[type])){if(!this._events[type].warned){var m;this._events.maxListeners!==undefined?m=this._events.maxListeners:m=defaultMaxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),console.trace())}this._events[type].push(listener)}else this._events[type]=[this._events[type],listener];return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){var self=this;return self.on(type,function e(){self.removeListener(type,g),listener.apply(this,arguments)}),this},EventEmitter.prototype.removeListener=function(type,listener){if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=list.indexOf(listener);if(i<0)return this;list.splice(i,1),list.length==0&&delete this._events[type]}else this._events[type]===listener&&delete this._events[type];return this},EventEmitter.prototype.removeAllListeners=function(type){return type&&this._events&&this._events[type]&&(this._events[type]=null),this},EventEmitter.prototype.listeners=function(type){return this._events||(this._events={}),this._events[type]||(this._events[type]=[]),isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]}}),require.define("/node_modules/sprintf/package.json",function(require,module,exports,__dirname,__filename){module.exports={main:"./lib/sprintf"}}),require.define("/node_modules/sprintf/lib/sprintf.js",function(require,module,exports,__dirname,__filename){var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input);return output.join("")}var str_format=function(){return str_format.cache.hasOwnProperty(arguments[0])||(str_format.cache[arguments[0]]=str_format.parse(arguments[0])),str_format.format.call(null,str_format.cache[arguments[0]],arguments)};return str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string")output.push(parse_tree[i]);else if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw sprintf('[sprintf] property "%s" does not exist',match[2][k]);arg=arg[match[2][k]]}}else match[1]?arg=argv[match[1]]:arg=argv[cursor++];if(/[^s]/.test(match[8])&&get_type(arg)!="number")throw sprintf("[sprintf] expecting number but found %s",get_type(arg));switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg,pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ",pad_length=match[6]-String(arg).length,pad=match[6]?str_repeat(pad_character,pad_length):"",output.push(match[5]?arg+pad:pad+arg)}}return output.join("")},str_format.cache={},str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null)parse_tree.push(match[0]);else if((match=/^\x25{2}/.exec(_fmt))!==null)parse_tree.push("%");else{if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))===null)throw"[sprintf] huh?";if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))===null)throw"[sprintf] huh?";field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!=="")if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null)field_list.push(field_match[1]);else{if((field_match=/^\[(\d+)\]/.exec(replacement_field))===null)throw"[sprintf] huh?";field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(arg_names===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";parse_tree.push(match)}_fmt=_fmt.substring(match[0].length)}return parse_tree},str_format}(),vsprintf=function(fmt,argv){return argv.unshift(fmt),sprintf.apply(null,argv)};exports.sprintf=sprintf,exports.vsprintf=vsprintf}),require.define("/shred/response.js",function(require,module,exports,__dirname,__filename){var _=require("underscore"),Content=require("./content"),HeaderMixins=require("./mixins/headers"),CookieJarLib=require("cookiejar"),Cookie=CookieJarLib.Cookie,zlib=null;try{zlib=require("zlib")}catch(e){console.warn("no zlib library")}var Iconv=null;try{Iconv=require("iconv-lite")}catch(e){console.warn("no iconv library")}var Response=function(raw,request,callback){var response=this;this._raw=raw,this._setHeaders.call(this,raw.headers);if(request.cookieJar&&this.getHeader("set-cookie")){var cookieStrings=this.getHeader("set-cookie"),cookieObjs=[],cookie;for(var i=0;i<cookieStrings.length;i++){var cookieString=cookieStrings[i];if(!cookieString)continue;cookieString.match(/domain\=/i)||(cookieString+="; domain="+request.host),cookieString.match(/path\=/i)||(cookieString+="; path="+request.path);try{cookie=new Cookie(cookieString),cookie&&cookieObjs.push(cookie)}catch(e){console.warn("Tried to set bad cookie: "+cookieString)}}request.cookieJar.setCookies(cookieObjs)}this.request=request,this.client=request.client,this.log=this.request.log;var chunkBuffers=[],dataLength=0;raw.on("data",function(chunk){chunkBuffers.push(chunk),dataLength+=chunk.length}),raw.on("end",function(){var body;if(typeof Buffer=="undefined")body=chunkBuffers.join("");else{body=new Buffer(dataLength);for(var i=0,pos=0;i<chunkBuffers.length;i++)chunkBuffers[i].copy(body,pos),pos+=chunkBuffers[i].length}var setBodyAndFinish=function(body){response._body=new Content({body:body,type:response.getHeader("Content-Type")}),callback(response)};zlib&&response.getHeader("Content-Encoding")==="gzip"?zlib.gunzip(body,function(err,gunzippedBody){Iconv&&response.request.encoding?body=Iconv.fromEncoding(gunzippedBody,response.request.encoding):body=gunzippedBody.toString(),setBodyAndFinish(body)}):(response.request.encoding&&(body=Iconv.fromEncoding(body,response.request.encoding)),setBodyAndFinish(body))})};Response.prototype={inspect:function(){var response=this,headers=_(response.headers).reduce(function(array,value,key){return array.push("	"+key+": "+value),array},[]).join("\n"),summary=["<Shred Response> ",response.status].join(" ");return[summary,"- Headers:",headers].join("\n")}},Object.defineProperties(Response.prototype,{status:{get:function(){return this._raw.statusCode},enumerable:!0},body:{get:function(){return this._body}},content:{get:function(){return this.body},enumerable:!0},isRedirect:{get:function(){return this.status>299&&this.status<400&&this.getHeader("Location")},enumerable:!0},isError:{get:function(){return this.status===0||this.status>399},enumerable:!0}}),HeaderMixins.getters(Response),HeaderMixins.privateSetters(Response);var getHeader=Response.prototype.getHeader;Response.prototype.getHeader=function(name){return getHeader.call(this,name)||typeof this._raw.getHeader=="function"&&this._raw.getHeader(name)},module.exports=Response}),require.define("/shred/content.js",function(require,module,exports,__dirname,__filename){var _=require("underscore"),Content=function(options){this.body=options.body,this.data=options.data,this.type=options.type};Content.prototype={},Object.defineProperties(Content.prototype,{type:{get:function(){if(this._type)return this._type;if(this._data)switch(typeof this._data){case"string":return"text/plain";case"object":return"application/json"}return"text/plain"},set:function(value){return this._type=value,this},enumerable:!0},data:{get:function(){return this._body?this.processor.parser(this._body):this._data},set:function(data){return this._body&&data&&Errors.setDataWithBody(this),this._data=data,this},enumerable:!0},body:{get:function(){return this._data?this.processor.stringify(this._data):this.processor.stringify(this._body)},set:function(body){return this._data&&body&&Errors.setBodyWithData(this),this._body=body,this},enumerable:!0},processor:{get:function(){var processor=Content.processors[this.type];return processor?processor:(processor=_(this.type.split(";")[0].split(/\+|\//)).detect(function(type){return Content.processors[type]}),Content.processors[processor]||{parser:identity,stringify:toString})},enumerable:!0},length:{get:function(){return typeof Buffer!="undefined"?Buffer.byteLength(this.body):this.body.length}}}),Content.processors={},Content.registerProcessor=function(types,processor){types.forEach?types.forEach(function(type){Content.processors[type]=processor}):Content.processors[types]=processor};var identity=function(x){return x},toString=function(x){return x.toString()};Content.registerProcessor(["text/html","text/plain","text"],{parser:identity,stringify:toString}),Content.registerProcessor(["application/json; charset=utf-8","application/json","json"],{parser:function(string){return JSON.parse(string)},stringify:function(data){return JSON.stringify(data)}});var Errors={setDataWithBody:function(object){throw new Error("Attempt to set data attribute of a content object when the body attributes was already set.")},setBodyWithData:function(object){throw new Error("Attempt to set body attribute of a content object when the data attributes was already set.")}};module.exports=Content}),require.define("/shred/mixins/headers.js",function(require,module,exports,__dirname,__filename){var _=require("underscore"),corsetCase=function(string){return string.toLowerCase().replace("_","-").replace(/(^|-)(\w)/g,function(s){return s.toUpperCase()})},initializeHeaders=function(object){return{}},$H=function(object){return object._headers||(object._headers=initializeHeaders(object))},getHeader=function(object,name){return $H(object)[corsetCase(name)]},getHeaders=function(object,names){var keys=names&&names.length>0?names:Object.keys($H(object)),hash=keys.reduce(function(hash,key){return hash[key]=getHeader(object,key),hash},{});return Object.freeze(hash),hash},setHeader=function(object,name,value){return $H(object)[corsetCase(name)]=value,object},setHeaders=function(object,hash){for(var key in hash)setHeader(object,key,hash[key]);return this};module.exports={getters:function(constructor){constructor.prototype.getHeader=function(name){return getHeader(this,name)},constructor.prototype.getHeaders=function(){return getHeaders(this,_(arguments))}},privateSetters:function(constructor){constructor.prototype._setHeader=function(key,value){return setHeader(this,key,value)},constructor.prototype._setHeaders=function(hash){return setHeaders(this,hash)}},setters:function(constructor){constructor.prototype.setHeader=function(key,value){return setHeader(this,key,value)},constructor.prototype.setHeaders=function(hash){return setHeaders(this,hash)}},gettersAndSetters:function(constructor){constructor.prototype.getHeader=function(name){return getHeader(this,name)},constructor.prototype.getHeaders=function(){return getHeaders(this,_(arguments))},constructor.prototype.setHeader=function(key,value){return setHeader(this,key,value)},constructor.prototype.setHeaders=function(hash){return setHeaders(this,hash)}}}}),require.define("/node_modules/iconv-lite/package.json",function(require,module,exports,__dirname,__filename){module.exports={}}),require.define("/node_modules/iconv-lite/index.js",function(require,module,exports,__dirname,__filename){var iconv=module.exports={toEncoding:function(str,encoding){return iconv.getCodec(encoding).toEncoding(str)},fromEncoding:function(buf,encoding){return iconv.getCodec(encoding).fromEncoding(buf)},defaultCharUnicode:"",defaultCharSingleByte:"?",getCodec:function(encoding){var enc=encoding||"utf8",codecOptions=undefined;for(;;){getType(enc)==="String"&&(enc=enc.replace(/[- ]/g,"").toLowerCase());var codec=iconv.encodings[enc],type=getType(codec);if(type==="String")codecOptions={originalEncoding:enc},enc=codec;else{if(type!=="Object"||codec.type==undefined){if(type==="Function")return codec(codecOptions);throw new Error("Encoding not recognized: '"+encoding+"' (searched as: '"+enc+"')")}codecOptions=codec,enc=codec.type}}},encodings:{internal:function(options){return{toEncoding:function(str){return new Buffer(ensureString(str),options.originalEncoding)},fromEncoding:function(buf){return ensureBuffer(buf).toString(options.originalEncoding)}}},utf8:"internal",ucs2:"internal",binary:"internal",ascii:"internal",base64:"internal",singlebyte:function(options){if(!options.chars||options.chars.length!==128&&options.chars.length!==256)throw new Error("Encoding '"+options.type+"' has incorrect 'chars' (must be of len 128 or 256)");options.chars.length===128&&(options.chars=asciiString+options.chars);if(!options.charsBuf){options.charsBuf=new Buffer(512);for(var i=0;i<options.chars.length;i++){var code=options.chars.charCodeAt(i);options.charsBuf[i*2+0]=code&255,options.charsBuf[i*2+1]=code>>>8}}if(!options.revCharsBuf){options.revCharsBuf=new Buffer(65536);var defChar=iconv.defaultCharSingleByte.charCodeAt(0);for(var i=0;i<options.revCharsBuf.length;i++)options.revCharsBuf[i]=defChar;for(var i=0;i<options.chars.length;i++)options.revCharsBuf[options.chars.charCodeAt(i)]=i}return{toEncoding:function(str){str=ensureString(str);var buf=new Buffer(str.length),revCharsBuf=options.revCharsBuf;for(var i=0;i<str.length;i++)buf[i]=revCharsBuf[str.charCodeAt(i)];return buf},fromEncoding:function(buf){buf=ensureBuffer(buf);var charsBuf=options.charsBuf,newBuf=new Buffer(buf.length*2),idx1=0,idx2=0;for(var i=0,_len=buf.length;i<_len;i++)idx1=buf[i]*2,idx2=i*2,newBuf[idx2]=charsBuf[idx1],newBuf[idx2+1]=charsBuf[idx1+1];return newBuf.toString("ucs2")}}},table:function(options){var table=options.table,key,revCharsTable=options.revCharsTable;if(!table)throw new Error("Encoding '"+options.type+"' has incorect 'table' option");if(!revCharsTable){revCharsTable=options.revCharsTable={};for(key in table)revCharsTable[table[key]]=parseInt(key)}return{toEncoding:function(str){str=ensureString(str);var len=0,strLen=str.length;for(var i=0;i<strLen;i++)str.charCodeAt(i)>>8?len+=2:len++;var newBuf=new Buffer(len);for(var i=0,j=0;i<strLen;i++){var unicode=str.charCodeAt(i);if(!(unicode>>7))newBuf[j++]=unicode;else{var gbkcode=revCharsTable[unicode]||revCharsTable[iconv.defaultCharUnicode.charCodeAt(0)];newBuf[j++]=gbkcode>>8,newBuf[j++]=gbkcode&255}}return newBuf},fromEncoding:function(buf){buf=ensureBuffer(buf);var idx=0,len=0,newBuf=new Buffer(len*2),unicode,gbkcode;for(var i=0,_len=buf.length;i<_len;i++,len++)!(buf[i]&128)||i++;var newBuf=new Buffer(len*2);for(var i=0,j=0,_len=buf.length;i<_len;i++,j++){var temp=buf[i],gbkcode,unicode;temp&128?(gbkcode=(temp<<8)+buf[++i],unicode=table[gbkcode]||iconv.defaultCharUnicode.charCodeAt(0)):unicode=temp,newBuf[j*2]=unicode&255,newBuf[j*2+1]=unicode>>8}return newBuf.toString("ucs2")}}}}};iconv.encode=iconv.toEncoding,iconv.decode=iconv.fromEncoding;var encodingsDir=__dirname+"/encodings/",fs=require("fs");fs.readdirSync(encodingsDir).forEach(function(file){if(fs.statSync(encodingsDir+file).isDirectory())return;var encodings=require(encodingsDir+file);for(var key in encodings)iconv.encodings[key]=encodings[key]});var asciiString="\0\b	\n\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",ensureBuffer=function(buf){return buf=buf||new Buffer(0),buf instanceof Buffer?buf:new Buffer(buf.toString(),"utf8")},ensureString=function(str){return str=str||"",str instanceof String?str:str.toString(str instanceof Buffer?"utf8":undefined)},getType=function(obj){return Object.prototype.toString.call(obj).slice(8,-1)}}),require.define("/node_modules/http-browserify/package.json",function(require,module,exports,__dirname,__filename){module.exports={main:"index.js",browserify:"browser.js"}}),require.define("/node_modules/http-browserify/browser.js",function(require,module,exports,__dirname,__filename){var http=module.exports,EventEmitter=require("events").EventEmitter,Request=require("./lib/request");http.request=function(params,cb){params||(params={}),params.host||(params.host=window.location.host.split(":")[0]),params.port||(params.port=window.location.port);var req=new Request(new xhrHttp,params);return cb&&req.on("response",cb),req},http.get=function(params,cb){params.method="GET";var req=http.request(params,cb);return req.end(),req};var xhrHttp=function(){if(typeof window=="undefined")throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){var axs=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var i=0;i<axs.length;i++)try{var ax=new window.ActiveXObject(axs[i]);return function(){if(ax){var ax_=ax;return ax=null,ax_}return new window.ActiveXObject(axs[i])}}catch(e){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended"}}),require.define("/node_modules/http-browserify/lib/request.js",function(require,module,exports,__dirname,__filename){var EventEmitter=require("events").EventEmitter,Response=require("./response"),isSafeHeader=require("./isSafeHeader"),Request=module.exports=function(xhr,params){var self=this;self.xhr=xhr,self.body="";var uri=params.host+":"+params.port+(params.path||"/");xhr.open(params.method||"GET",(params.scheme||"http")+"://"+uri,!0),params.headers&&Object.keys(params.headers).forEach(function(key){if(!isSafeHeader(key))return;var value=params.headers[key];Array.isArray(value)?value.forEach(function(v){xhr.setRequestHeader(key,v)}):xhr.setRequestHeader(key,value)});var res=new Response(xhr);res.on("ready",function(){self.emit("response",res)}),xhr.onreadystatechange=function(){res.handle(xhr)}};Request.prototype=new EventEmitter,Request.prototype.setHeader=function(key,value){if(Array.isArray&&Array.isArray(value)||value instanceof Array)for(var i=0;i<value.length;i++)this.xhr.setRequestHeader(key,value[i]);else this.xhr.setRequestHeader(key,value)},Request.prototype.write=function(s){this.body+=s},Request.prototype.end=function(s){s!==undefined&&this.write(s),this.xhr.send(this.body)}}),require.define("/node_modules/http-browserify/lib/response.js",function(require,module,exports,__dirname,__filename){function parseHeaders(xhr){var lines=xhr.getAllResponseHeaders().split(/\r?\n/),headers={};for(var i=0;i<lines.length;i++){var line=lines[i];if(line==="")continue;var m=line.match(/^([^:]+):\s*(.*)/);if(m){var key=m[1].toLowerCase(),value=m[2];headers[key]!==undefined?Array.isArray&&Array.isArray(headers[key])||headers[key]instanceof Array?headers[key].push(value):headers[key]=[headers[key],value]:headers[key]=value}else headers[line]=!0}return headers}var EventEmitter=require("events").EventEmitter,isSafeHeader=require("./isSafeHeader"),Response=module.exports=function(xhr){this.xhr=xhr,this.offset=0};Response.prototype=new EventEmitter;var capable={streaming:!0,status2:!0};Response.prototype.getHeader=function(key){var header=this.headers?this.headers[key.toLowerCase()]:null;return header?header:isSafeHeader(key)?this.xhr.getResponseHeader(key):null},Response.prototype.handle=function(){var xhr=this.xhr;if(xhr.readyState===2&&capable.status2){try{this.statusCode=xhr.status,this.headers=parseHeaders(xhr)}catch(err){capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&xhr.readyState===3){try{this.statusCode||(this.statusCode=xhr.status,this.headers=parseHeaders(xhr),this.emit("ready"))}catch(err){}try{this.write()}catch(err){capable.streaming=!1}}else xhr.readyState===4&&(this.statusCode||(this.statusCode=xhr.status,this.emit("ready")),this.write(),xhr.error?this.emit("error",xhr.responseText):this.emit("end"))},Response.prototype.write=function(){var xhr=this.xhr;xhr.responseText.length>this.offset&&(this.emit("data",xhr.responseText.slice(this.offset)),this.offset=xhr.responseText.length)}}),require.define("/node_modules/http-browserify/lib/isSafeHeader.js",function(require,module,exports,__dirname,__filename){var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","set-cookie","te","trailer","transfer-encoding","upgrade","user-agent","via"];module.exports=function(headerName){return headerName?unsafeHeaders.indexOf(headerName.toLowerCase())===-1:!1}}),require.alias("http-browserify","/node_modules/http"),require.alias("http-browserify","/node_modules/https")